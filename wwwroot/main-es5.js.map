{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/leaderboard/leaderboard.component.html","./src/app/recent/recent.component.html","./src/app/vote/vote.component.html","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/leaderboard/leaderboard.component.ts","./src/app/recent/recent.component.ts","./src/app/vote/vote.component.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<div class=\\\"row text-center justify-content-center\\\">\\r\\n  <div class=\\\"col-md-5\\\">\\r\\n    <div class=\\\"card\\\">\\r\\n      <h1 class=\\\"card-title text-center\\\">Vote</h1>\\r\\n      <div class=\\\"card-body\\\">\\r\\n        <VOTE-COMPONENT></VOTE-COMPONENT>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<br />\\r\\n<br />\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <div class=\\\"card force-card-height \\\">\\r\\n      <h1 class=\\\"card-title text-center\\\">Leaderboard</h1>\\r\\n      <div class=\\\"scrollable\\\">\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <LEADERBOARD-COMPONENT></LEADERBOARD-COMPONENT>\\r\\n        </div>\\r\\n      </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <div class=\\\"card force-card-height\\\">\\r\\n      <h1 class=\\\"card-title text-center\\\">Recent Votes</h1>\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <RECENT-COMPONENT></RECENT-COMPONENT>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","module.exports = \"<div class=\\\"input-group\\\">\\r\\n  <input type=\\\"text\\\" [(ngModel)]='playerFilter' class=\\\"form-control\\\" placeholder=\\\"Filter by name...\\\" aria-label=\\\"Player's name\\\" aria-describedby=\\\"basic-addon2\\\">\\r\\n  <div class=\\\"input-group-append\\\">\\r\\n    <button class=\\\"btn btn-secondary\\\" type=\\\"button\\\" (click)='clear()'>Clear</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<br />\\r\\n\\r\\n<p *ngFor=\\\"let player of (playerFilter) ? filterList(leaderboard) : leaderboard\\\">\\r\\n  {{player}}\\r\\n</p>\\r\\n\"","module.exports = \"<div class=\\\"input-group\\\">\\r\\n  <input type=\\\"text\\\" [(ngModel)]='playerFilter' (keyup.enter)='search()' class=\\\"form-control\\\" placeholder=\\\"Filter by name...\\\" aria-label=\\\"Player's name\\\" aria-describedby=\\\"basic-addon2\\\">\\r\\n  <div class=\\\"input-group-append\\\">\\r\\n    <button class=\\\"btn btn-secondary\\\" type=\\\"button\\\" (click)='search()'>Search</button>\\r\\n    <button class=\\\"btn btn-secondary\\\" type=\\\"button\\\" (click)='reset()'>Reset</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<br />\\r\\n\\r\\n<p *ngFor=\\\"let vote of (filteringResults) ? filteredRecentVotes : recentVotes\\\">\\r\\n  {{vote[0]}} > {{vote[1]}}\\r\\n</p>\\r\\n\\r\\n\"","module.exports = \"<button class=\\\"btn btn-primary btn-lg\\\" (click)='vote1()'>\\r\\n  {{player1Name}}\\r\\n</button>\\r\\n\\r\\nor\\r\\n\\r\\n<button class=\\\"btn btn-danger btn-lg\\\" (click)='vote2()'>\\r\\n  {{player2Name}}\\r\\n</button>\\r\\n\\r\\n<p *ngIf=\\\"voteCount != -1\\\">{{voteCount}} total votes. <u (click)='getVote()'>Skip vote.</u></p>\\r\\n\"","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html'\n})\nexport class AppComponent {\n  constructor() { }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { FormsModule } from \"@angular/forms\";\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { VoteComponent } from './vote/vote.component';\nimport { LeaderboardComponent } from './leaderboard/leaderboard.component';\nimport { RecentComponent } from './recent/recent.component';\n\n@NgModule({\n  declarations: [ AppComponent, VoteComponent, LeaderboardComponent, RecentComponent ],\n  imports:      [ BrowserModule, FormsModule, HttpClientModule ],\n  bootstrap:    [ AppComponent ]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'LEADERBOARD-COMPONENT',\r\n  templateUrl: './leaderboard.component.html'\r\n})\r\nexport class LeaderboardComponent implements OnInit {\r\n  private api: string = \"https://gvgrank.azurewebsites.net/api/leaderboard\";\r\n  //private api: string = \"https://localhost:44329/api/leaderboard\";\r\n\r\n  public leaderboard: string[];\r\n  public playerFilter: string;\r\n\r\n  /*\r\n   * Possible solutions for this...\r\n   *   1) Refresh the leaderboard every X seconds\r\n   *   2) Manual refresh button only\r\n   *   3) Get a hash every X seconds, compare, update if needed.\r\n   *   4) Server sends new leaderboard when the order is changed\r\n   *      4.5) Hard mode -> only send list changes\r\n   */\r\n\r\n  constructor(private http: HttpClient) {\r\n    //setInterval(() => this.getLeaderboard(), 60000);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLeaderboard();\r\n  }\r\n\r\n\r\n  // UTILITY\r\n\r\n  numberArray(arr: string[]): string[] {\r\n    for (var i = 0; i < arr.length; i++) { arr[i] = (i + 1) + ') ' + arr[i]; }\r\n    return arr;\r\n  }\r\n\r\n  clear() {\r\n    this.playerFilter = '';\r\n  }\r\n\r\n  filterList(arr: string[]): string[] {\r\n    //return arr.filter(x => x.includes(this.playerFilter));\r\n    return arr.filter(x => x.toLowerCase().includes(this.playerFilter.toLowerCase()));\r\n  }\r\n\r\n\r\n  // API\r\n\r\n  getLeaderboard() : void {\r\n    this.http.get<any>(this.api).subscribe(\r\n      response => {\r\n        this.leaderboard = this.numberArray(response);\r\n      },\r\n      error => {\r\n        console.log(<any>error.message);\r\n        this.leaderboard = ['Failed to load leaderboard.'];\r\n      }\r\n    );\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport * as signalR from \"@aspnet/signalr\";\r\nimport { LeaderboardComponent } from '../leaderboard/leaderboard.component';\r\n\r\n@Component({\r\n  selector:    'RECENT-COMPONENT',\r\n  templateUrl: './recent.component.html'\r\n})\r\nexport class RecentComponent implements OnInit {\r\n  private apiRecent:     string = \"https://gvgrank.azurewebsites.net/api/recentvotes\";\r\n  private signalrConn:   string = \"https://gvgrank.azurewebsites.net/recentvote\";\r\n  //private apiRecent:     string = \"https://localhost:44329/api/recentvotes\";\r\n  //private signalrConn:   string = \"https://localhost:44329/recentvote\";\r\n\r\n  private hubConnection: signalR.HubConnection\r\n  private count:         number = 14; // Number of entries to display, dictated by card size\r\n\r\n  public filteringResults:    boolean = false;\r\n  public recentVotes:         string[][];\r\n  public filteredRecentVotes: string[][];\r\n  public playerFilter:        string;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit(): void {\r\n    this.startConnection();\r\n    this.addTransferChartDataListener();\r\n\r\n    this.getRecentVotes();\r\n  }\r\n\r\n\r\n  // UTILITY\r\n\r\n  update(vote: string[]): void {\r\n    if (this.recentVotes.length == 14) {\r\n      this.recentVotes.pop();\r\n    }\r\n    this.recentVotes.unshift(vote);\r\n  }\r\n\r\n  search(): void {\r\n    if (this.playerFilter) {\r\n      this.filteringResults = true;\r\n      this.getRecentVotes();\r\n    }\r\n  }\r\n\r\n  reset(): void {\r\n    this.filteringResults = false;\r\n    this.playerFilter = '';\r\n  }\r\n\r\n\r\n  // API\r\n\r\n  getRecentVotes(): void {\r\n    this.filteredRecentVotes = [];\r\n\r\n    var apiString: string = this.apiRecent + '?count=' + this.count;\r\n\r\n    if (this.filteringResults)\r\n      apiString += '&player=' + this.playerFilter;\r\n\r\n    this.http.get<any>(apiString).subscribe(\r\n      response => {\r\n        (this.filteringResults) ? this.filteredRecentVotes = response : this.recentVotes = response;\r\n      },\r\n      error => {\r\n        console.log(<any>error.message);\r\n        (this.filteringResults) ? this.filteredRecentVotes = [['Failed to load recent votes', '']] : this.recentVotes = [['Failed to load recent votes','']];\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n  // SIGNALR\r\n\r\n  public startConnection = () => {\r\n    this.hubConnection = new signalR.HubConnectionBuilder()\r\n      .withUrl(this.signalrConn\r\n        , {                                             // https://stackoverflow.com/a/52913505/10874809\r\n          skipNegotiation: true,                          // ^\r\n          transport: signalR.HttpTransportType.WebSockets // ^\r\n        }                                               // ^\r\n      )\r\n      .build();\r\n\r\n    this.hubConnection\r\n      .start()\r\n      .then(() => console.log('SignalR Connection started'))\r\n      .catch(err => console.log('SignalR  Connection failed: ' + err))\r\n  }\r\n\r\n  public addTransferChartDataListener = () => {\r\n    this.hubConnection.on('recentvote', (data) => {\r\n      this.update(data);\r\n    });\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { IVote } from './vote';\r\n\r\n@Component({\r\n  selector:    'VOTE-COMPONENT',\r\n  templateUrl: './vote.component.html'\r\n})\r\nexport class VoteComponent implements OnInit {\r\n  private apiVote:   string = \"https://gvgrank.azurewebsites.net/api/vote\";\r\n  private apiVCount: string = \"https://gvgrank.azurewebsites.net/api/voteCount\";\r\n  //private apiVote:   string = \"https://localhost:44329/api/vote\";\r\n  //private apiVCount: string = \"https://localhost:44329/api/voteCount\";\r\n  \r\n  public player1Name:   string = 'Loading...';\r\n  public player2Name:   string = 'Loading...';\r\n  public player1Id:     number = 0;\r\n  public player2Id:     number = 0;\r\n  public voteCount:     number = -1; // Value of -1 will hide the element\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getVoteCount();\r\n    this.getVote();\r\n  }\r\n\r\n\r\n  // UTILITY\r\n\r\n  vote1(): void { // Left button click\r\n    this.vote(this.player1Id, this.player2Id);\r\n  }\r\n\r\n  vote2(): void { // Right button click\r\n    this.vote(this.player2Id, this.player1Id);\r\n  }\r\n\r\n  vote(winId: number, loseId: number): void {\r\n    this.postVote({ WinId: winId, LoseId: loseId });\r\n\r\n    this.getVoteCount();\r\n    this.getVote();\r\n  }\r\n\r\n\r\n  // API\r\n\r\n  getVoteCount(): void {\r\n    this.http.get<any>(this.apiVCount).subscribe(\r\n      response => this.voteCount = response,\r\n      error => {\r\n        this.voteCount = -1; // Value of -1 will hide the element\r\n        console.log(<any>error.message);\r\n      });\r\n  }\r\n\r\n  getVote(): void {\r\n    this.player1Name = ' Loading...';\r\n    this.player2Name = ' Loading...';\r\n    this.player1Id = 0;\r\n    this.player2Id = 0;\r\n\r\n    this.http.get<any>(this.apiVote).subscribe(\r\n      response => {\r\n        this.player1Name = response.name1;\r\n        this.player2Name = response.name2;\r\n        this.player1Id   = response.id1;\r\n        this.player2Id   = response.id2;\r\n      },\r\n      error => {\r\n        console.log(<any>error.message);\r\n        this.player1Name = 'ERROR';\r\n        this.player2Name = 'ERROR';\r\n        this.player1Id   = 0;\r\n        this.player2Id   = 0;\r\n      });\r\n  }\r\n\r\n  postVote(vote: IVote): void {\r\n    this.http.post<any>(\r\n      this.apiVote,\r\n      JSON.stringify(vote),\r\n      {\r\n        headers: new HttpHeaders({\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': '*'\r\n        })\r\n      }).subscribe();\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}